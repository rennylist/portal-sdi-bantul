<script type="text/javascript">
    // preview gambar sebelum di upload
    function tampilkanPreview(gambar, idpreview) {
        // membuat objek gambar
        var gb = gambar.files;
        // loop untuk merender gambar
        for (var i = 0; i < gb.length; i++) {
            // bikin variabel
            var gbPreview = gb[i];
            var imageType = /image.*/;
            var preview = document.getElementById(idpreview);
            var reader = new FileReader();
            if (gbPreview.type.match(imageType)) {
                //jika tipe data sesuai
                preview.file = gbPreview;
                reader.onload = (function (element) {
                	// console.log(element);
                    return function (e) {
                        element.style = "background-image: url('"+e.target.result+"')";
                    };
                })(preview);
                // membaca data URL gambar
                reader.readAsDataURL(gbPreview);
            } else {
                // jika tipe data tidak sesuai
                alert("Type file tidak sesuai. Khusus image.");
            }
        }
    }
	$(document).ready(function () {
		// date
		$('.tgl').datepicker({
			format: "yyyy-mm-dd"
		});
		// select2
		$(".select-2").select2();
		// file
	})
</script>

<div class="kt-subheader  kt-grid__item" id="kt_subheader">
	<div class="kt-container  kt-container--fluid ">
		<div class="kt-subheader__main">
			<span class="kt-subheader__separator kt-hidden"></span>
			<div class="kt-subheader__breadcrumbs">
				<a href="#" class="kt-subheader__breadcrumbs-home"><i class="fa fa-tags"></i></a>
                <span class="kt-subheader__breadcrumbs-separator"></span>
                <a href="#" class="kt-subheader__breadcrumbs-link">Pengaturan</a>
				<span class="kt-subheader__breadcrumbs-separator"></span>
				<a href="{$config->site_url('operator/pendukung/aplikasi')}" class="kt-subheader__breadcrumbs-link">Profil dan Akun</a>
				<span class="kt-subheader__breadcrumbs-separator"></span>
			</div>
		</div>
		<div class="kt-subheader__toolbar">
			<div class="kt-subheader__wrapper">
			</div>
		</div>
	</div>
</div>

<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
	<!-- notification template -->
	{include file="base/templates/notification.html"}
	<!-- end of notification template-->
	<div class="kt-grid kt-grid--desktop kt-grid--ver kt-grid--ver-desktop kt-app">
		<button class="kt-app__aside-close" id="kt_user_profile_aside_close">
			<i class="la la-close"></i>
		</button>
		<div class="kt-grid__item kt-app__toggle kt-app__aside" id="kt_user_profile_aside">
			<div class="kt-portlet ">
				<div class="kt-portlet__head  kt-portlet__head--noborder">
					<div class="kt-portlet__head-label">
						<h3 class="kt-portlet__head-title">
						</h3>
					</div>
				</div>
				<div class="kt-portlet__body kt-portlet__body--fit-y">					
					<div class="kt-widget kt-widget--user-profile-1">
						<div class="kt-widget__head">
							<div class="kt-widget__media">
								<img src="{$foto|default:$default_foto}" width="100" height="100" alt="image">
							</div>
							<div class="kt-widget__content">
								<div class="kt-widget__section">
									<a href="#" class="kt-widget__username">
										{$detail.nama_lengkap|default:''}
										<i class="flaticon2-correct kt-font-success"></i>
									</a>
									<span class="kt-widget__subtitle">
										{$detail.user_alias|default:''}
									</span>
								</div>
							</div>
						</div>
						<div class="kt-widget__body">
							<div class="kt-widget__content">
								<div class="kt-widget__info">
									<span class="kt-widget__label">Email :</span>
									<a href="#" class="kt-widget__data">{$detail.user_mail|default:''}</a>
								</div>
								<div class="kt-widget__info">
									<span class="kt-widget__label">Telepon :</span>
									<a href="#" class="kt-widget__data">{$detail.nomor_telepon|default:''}</a>
								</div>
								<div class="kt-widget__info">
									<span class="kt-widget__label">Alamat :</span>
									<span class="kt-widget__data">{$detail.alamat_tinggal|default:''}</span>
								</div>
							</div>
							<div class="kt-widget__items">
								<a href="{$config->site_url('admin/setting/user')}" class="kt-widget__item">
									<span class="kt-widget__section">
										<span class="kt-widget__icon">
											<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
												<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
													<polygon points="0 0 24 0 24 24 0 24"></polygon>
													<path d="M12,11 C9.790861,11 8,9.209139 8,7 C8,4.790861 9.790861,3 12,3 C14.209139,3 16,4.790861 16,7 C16,9.209139 14.209139,11 12,11 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"></path>
													<path d="M3.00065168,20.1992055 C3.38825852,15.4265159 7.26191235,13 11.9833413,13 C16.7712164,13 20.7048837,15.2931929 20.9979143,20.2 C21.0095879,20.3954741 20.9979143,21 20.2466999,21 C16.541124,21 11.0347247,21 3.72750223,21 C3.47671215,21 2.97953825,20.45918 3.00065168,20.1992055 Z" fill="#000000" fill-rule="nonzero"></path>
												</g>
											</svg> </span>
										<span class="kt-widget__desc">
											Informasi Data Diri
										</span>
									</span>
								</a>
								<a href="{$config->site_url('admin/setting/user/kontak')}" class="kt-widget__item ">
									<span class="kt-widget__section">
										<span class="kt-widget__icon">
											<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
												<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
													<rect x="0" y="0" width="24" height="24"></rect>
													<path d="M2.56066017,10.6819805 L4.68198052,8.56066017 C5.26776695,7.97487373 6.21751442,7.97487373 6.80330086,8.56066017 L8.9246212,10.6819805 C9.51040764,11.267767 9.51040764,12.2175144 8.9246212,12.8033009 L6.80330086,14.9246212 C6.21751442,15.5104076 5.26776695,15.5104076 4.68198052,14.9246212 L2.56066017,12.8033009 C1.97487373,12.2175144 1.97487373,11.267767 2.56066017,10.6819805 Z M14.5606602,10.6819805 L16.6819805,8.56066017 C17.267767,7.97487373 18.2175144,7.97487373 18.8033009,8.56066017 L20.9246212,10.6819805 C21.5104076,11.267767 21.5104076,12.2175144 20.9246212,12.8033009 L18.8033009,14.9246212 C18.2175144,15.5104076 17.267767,15.5104076 16.6819805,14.9246212 L14.5606602,12.8033009 C13.9748737,12.2175144 13.9748737,11.267767 14.5606602,10.6819805 Z" fill="#000000" opacity="0.3"></path>
													<path d="M8.56066017,16.6819805 L10.6819805,14.5606602 C11.267767,13.9748737 12.2175144,13.9748737 12.8033009,14.5606602 L14.9246212,16.6819805 C15.5104076,17.267767 15.5104076,18.2175144 14.9246212,18.8033009 L12.8033009,20.9246212 C12.2175144,21.5104076 11.267767,21.5104076 10.6819805,20.9246212 L8.56066017,18.8033009 C7.97487373,18.2175144 7.97487373,17.267767 8.56066017,16.6819805 Z M8.56066017,4.68198052 L10.6819805,2.56066017 C11.267767,1.97487373 12.2175144,1.97487373 12.8033009,2.56066017 L14.9246212,4.68198052 C15.5104076,5.26776695 15.5104076,6.21751442 14.9246212,6.80330086 L12.8033009,8.9246212 C12.2175144,9.51040764 11.267767,9.51040764 10.6819805,8.9246212 L8.56066017,6.80330086 C7.97487373,6.21751442 7.97487373,5.26776695 8.56066017,4.68198052 Z" fill="#000000"></path>
												</g>
											</svg> </span>
										<span class="kt-widget__desc">
											Informasi Kontak
										</span>										
								</span></a>
								<a href="{$config->site_url('admin/setting/user/password')}" class="kt-widget__item kt-widget__item--active">
									<span class="kt-widget__section">
										<span class="kt-widget__icon">
											<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
												<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
													<rect x="0" y="0" width="24" height="24"></rect>
													<path d="M4,4 L11.6314229,2.5691082 C11.8750185,2.52343403 12.1249815,2.52343403 12.3685771,2.5691082 L20,4 L20,13.2830094 C20,16.2173861 18.4883464,18.9447835 16,20.5 L12.5299989,22.6687507 C12.2057287,22.8714196 11.7942713,22.8714196 11.4700011,22.6687507 L8,20.5 C5.51165358,18.9447835 4,16.2173861 4,13.2830094 L4,4 Z" fill="#000000" opacity="0.3"></path>
													<path d="M12,11 C10.8954305,11 10,10.1045695 10,9 C10,7.8954305 10.8954305,7 12,7 C13.1045695,7 14,7.8954305 14,9 C14,10.1045695 13.1045695,11 12,11 Z" fill="#000000" opacity="0.3"></path>
													<path d="M7.00036205,16.4995035 C7.21569918,13.5165724 9.36772908,12 11.9907452,12 C14.6506758,12 16.8360465,13.4332455 16.9988413,16.5 C17.0053266,16.6221713 16.9988413,17 16.5815,17 C14.5228466,17 11.463736,17 7.4041679,17 C7.26484009,17 6.98863236,16.6619875 7.00036205,16.4995035 Z" fill="#000000" opacity="0.3"></path>
												</g>
											</svg> </span>
										<span class="kt-widget__desc">
											Ubah Password
										</span>
									</span>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="kt-grid__item kt-grid__item--fluid kt-app__content">
			<div class="row">
				<div class="col-xl-12">
					<div class="kt-portlet">
						<div class="kt-portlet__head">
							<div class="kt-portlet__head-label">
								<h3 class="kt-portlet__head-title">Informasi Akun Sistem <small>ubah password kamu</small></h3>
							</div>
							<div class="kt-portlet__head-toolbar">
								<div class="kt-portlet__head-wrapper">
									<button type="button" class="btn btn-label-brand btn-sm btn-icon btn-icon-md">
										<i class="flaticon2-gear"></i>
									</button>
								</div>
							</div>
						</div>
						<form class="kt-form" action="{$config->site_url('admin/setting/user/edit_password_process')}" method="post" enctype="multipart/form-data">
							<div class="kt-portlet__body">
								<div class="kt-section kt-section--first">
									<div class="kt-section__body">
										<div class="form-group">
										    <label class="col-sm-3 control-label">Password Saat Ini</label>
										    <div class="col-sm-8">
										        <input type="password" name="old_pass" value="" class="form-control" autocomplete="off" placeholder="Masukkan password lama anda disini." required="required" />
										    </div>
										</div>
										<div class="form-group">
										    <label class="col-sm-3 control-label">Password Baru</label>
										    <div class="col-sm-8">
										        <input type="password" name="user_pass" id="user_pass" value="" class="form-control" autocomplete="off" placeholder="Minimal 8 Karakter, Maksimal 20 Karakter" required="required" />
												<br />
												<div id="Length" class="glyphicon glyphicon-remove">Minimal password 8 karakter</div>
												<div id="UpperCase" class="glyphicon glyphicon-remove">Harus memuat paling sedikit 1 karakter huruf besar</div>
												<div id="LowerCase" class="glyphicon glyphicon-remove">Harus memuat paling sedikit 1 karakter huruf kecil</div>
												<div id="Numbers" class="glyphicon glyphicon-remove">Harus memuat paling sedikit 1 karakter angka</div>
												<div id="Symbols" class="glyphicon glyphicon-remove">Harus memuat paling sedikit 1 karakter spesial </div>
											
											</div>
										</div>
										<div class="form-group">
										    <label class="col-sm-3 control-label">Konfirmasi Password Baru</label>
										    <div class="col-sm-8">
										        <input type="password" name="confirm_user_pass" value="" class="form-control" autocomplete="off" placeholder="Masukkan kembali password baru anda disini." required="required" />
										    </div>
										</div>
										<!-- <div class="form-group">
										    <div class="col-sm-12">
										        <label class="md-check">
										            <input value="yes" name="send_mail" type="checkbox" /> 
										            <i class="blue"></i>
										            Kirim perubahan password ke <b>{$com_user.user_mail|default:'-'}</b>.
										        </label>
										    </div>
										</div> -->
									</div>
								</div>
							</div>
							<div class="kt-portlet__foot">
								<div class="kt-form__actions">
									<div class="row">
										<div class="col-lg-3 col-xl-3">
										</div>
										<div class="col-lg-9 col-xl-9">
											<button type="submit" class="btn btn-success">Simpan</button>&nbsp;
											<button type="reset" class="btn btn-secondary">Reset</button>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<script>
	var result_truet = 0;
	var result_false = 0;
	/*Actual validation function*/
	function ValidatePassword() {
	  /*Array of rules and the information target*/
	  var rules = [
		{
		  Pattern: "[A-Z]",
		  Target: "UpperCase",
		},
		{
		  Pattern: "[a-z]",
		  Target: "LowerCase",
		},
		{
		  Pattern: "[0-9]",
		  Target: "Numbers",
		},
		{
		  Pattern: "[!@@#$%^&*.,]",
		  Target: "Symbols",
		},
	  ];
  
	  //Just grab the password once
	  var password = $(this).val();
  
	  /*Length Check, add and remove class could be chained*/
	  /*I've left them seperate here so you can see what is going on */
	  /*Note the Ternary operators ? : to select the classes*/
	  $("#Length").removeClass(
		password.length > 7 ? "glyphicon-remove" : "glyphicon-ok"
	  );
	  $("#Length").addClass(
		password.length > 7 ? "glyphicon-ok" : "glyphicon-remove"
	  );
  
	  /*Iterate our remaining rules. The logic is the same as for Length*/
	  for (var i = 0; i < rules.length; i++) {
		$("#" + rules[i].Target).removeClass(
		  new RegExp(rules[i].Pattern).test(password)
			? "glyphicon-remove"
			: "glyphicon-ok"
		);
		$("#" + rules[i].Target).addClass(
		  new RegExp(rules[i].Pattern).test(password)
			? "glyphicon-ok"
			: "glyphicon-remove"
		);
	  }
	}
  
	/*Bind our event to key up for the field. It doesn't matter if it's delete or not*/
	$(document).ready(function () {
	  $("#user_pass").on("keyup", ValidatePassword);
	});
  </script>
  <style>
	.glyphicon-remove {
		color: red;
	}

	.glyphicon-ok {
		color: green;
	}
  </style>